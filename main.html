<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <title>Nice Looking Form</title>
   <meta name="description" content="">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="sidenav.css">
   <link rel="stylesheet" href="nav.css">
   <link rel="stylesheet" href="styles.css">
</head>

<body>

<!-- Content from Navbar.html -->
    <div class="navbar">
        <div class="logo-container">
            <a href="main.html">
                <img class="logo" src="images/home.png" alt="logo">
            </a>
            
         </div>
         <div class="profile-dropdown">
            <a class="profile-page" href="#">
               <img class="profile-image" src="images/profile.jpg" alt="profile image">
            </a>
            <div class="dropdown-content" id="dropdownContent">
               <h4>User Information</h4>
               <p>Name: John Doe</p>
               <p>Email: johndoe@example.com</p>
               <p>Role: Admin</p>
               <a href="#">Logout</a>
            </div>
         </div>
    </div>

<!-- Content from sidenavbar.html -->
        <div class="side-nav">
          
          <div class= "platforms">
            <ul>
            <li class="azure">
                <a href="azure.html"> 
                    <img src="images/azure.png" alt="">
                    <p> Azure </p>
                </a>
            </li>
              <li class="aws">
                <a href="aws.html"> 
                    <img src="images/aws.png" alt="">
                    <p> AWS </p>
                </a>
              </li>
              <li class="onpremise">
                <a href="onpremises.html"> 
                    <img src="images/onpremises.png" alt="">
                    <p> On Premises</p>
                </a>
            </li>
            <li class="database">
                <a href="database.html"> 
                    <img src="images/database.png" alt="">
                    <p> Database </p>
                </a>
            </li>
            <li class="catelogue">
                <a href="catalogue.html"> 
                    <img src="images/catalogue.png" alt="">
                    <p> Catalogue</p>
                </a>
            </li>
            </ul>
          </div>
        </div>
  <div class="container">
  
<!-- End sidenavbar.html -->
  
    <form id="myForm">

        <!-- Section I: DPIA - dropdown -->
        <div class="form-section">
          <h2 id="item-title">DPIA</h2>
          <div class="row">
            <div class="form-group column1" style="padding-right: -100px;">
              <label for="dpia">Q1: Please confirm that your service will not contain any of the data types referenced:</label>
              <select id="dpia" name="dpia">
                <option value="O1">My service will (but not until I have liaised with ISG)</option>
                <option value="O2">My service will NOT contain any of the data types identified</option>
              </select>
            </div>
            <div class="form-group column1" >
              <label for="dataOwner">Q2: Data Owner</label>
              <input type="text" id="dataOwner" name="dataOwner">
            </div>
          </div>
        </div>
        <div class="separator"></div>
  
          <!-- Section 2: ISD Information - 3 columns -->
          <div class="form-section">
            <h2>ISD Information</h2>
            <div class="row">
              <div class="form-group column">
                <label for="businessUnit">Q1: Business Unit</label>
                <select id="businessUnit" name="businessUnit">
                  <!-- Business unit options will be dynamically populated here -->
                </select>
              </div>
              <div class="form-group column">
                <label for="serviceId">Q2: Service ID</label>
                <select id="serviceId" name="serviceId">
                  <!-- Service ID options will be dynamically populated here -->
                </select>
              </div>
              <div class="form-group column">
                <label for="groupEmail">Q3: Group email</label>
                <input type="email" id="groupEmail" name="groupEmail">
              </div>
            </div>
          </div>
  
        <!-- Section 3: Virtual Machine Information - all questions are dropdowns -->
        <div class="form-section">
          <h2>Virtual Machine Information</h2>
          <div class="row">
            <div class="form-group column">
              <label for="operatingSystem">Q1: Operating System</label>
              <select id="operatingSystem" name="operatingSystem">
                <option value="O1">Windows Server 2022 Datacenter</option>
                <option value="O2">Windows Server 2022 Datacenter</option>
                <option value="O3">RHEL 8</option>
              </select>
            </div>
  
            <div class="form-group column">
              <label for="environment">Q2: Environment</label>
              <select id="environment" name="environment">
                <option value="O1">Non Production</option>
                <option value="O2">Production</option>
              </select>
            </div>
            <div class="form-group column">
              <label for="numVms">Q3: How many VMs do you want?</label>
              <select id="numVms" name="numVms">
                <option value="O1">S – 4GB Memory / 2CPU</option>
                <option value="O2">M – 8GB Memory / 2CPU</option>
                <option value="O3">L – 16GB Memory / 4CPU</option>
                <!-- Add more options here -->
              </select>
            </div>
            
  
            <div class="form-group column">
              <label for="dataDiskSize">Q4: Size(GB) of each extra Data disk</label>
              <select id="dataDiskSize" name="dataDiskSize">
                <option value="O1">20</option>
                <option value="O2">50</option>
                <option value="O3">100</option>
              </select>
            </div>
            <div class="form-group column">
              <label for="serverRole">Q5: Server Role</label>
              <select id="serverRole" name="serverRole">
                <option value="O1">Regular VM</option>
                <option value="O2">Web</option>
                <option value="O3">App</option>
                <option value="O4">DB</option>
                <option value="O5">WebAp</option>
                <option value="O6">WebDB</option>
                <option value="O7">AppDB</option>
                <option value="O8">WebAppDB</option>
              </select>
            </div>
            
            <div class="form-group column">
              <label for="vmSpecification">Q6: Virtual Machine Specification</label>
              <select id="vmSpecification" name="vmSpecification">
                <option value="O1">S – 4GB Memory / 2CPU</option>
                <option value="O2">M – 8GB Memory / 2CPU</option>
                <option value="O3">L – 16GB Memory / 4CPU</option>
              </select>
            </div>
            
            <div class="form-group column">
              <label for="numDataDisks">Q7: How many extra Data disks do you want?</label>
              <select id="numDataDisks" name="numDataDisks">
                <option value="O1">0</option>
                <option value="O2">1</option>
                <option value="O3">2</option>
                <option value="O4">3</option>
                <option value="O5">5</option>
              </select>
            </div>
          </div>
        </div>
        <div class="separator"></div>
  
        <!-- Section 4: Virtual Machine Information -->
        <div class="form-section">
          <h2 id="item-title">Virtual Machine Information</h2>
          <div class="row">
            <div class="form-group column2">
              <label for="budgetCode" >Q1: Budget Code (use this format: Project.Task.Award) </label>
              <input type="text" id="budgetCode" name="budgetCode">
            </div>
            
            <div class="form-group column2">
              <label for="budgetOwner">Q2: Budget Owner (Company ID)</label>
              <input type="text" id="budgetOwner" name="budgetOwner">
            </div>
          </div>
        </div>
        <div class="separator"></div>
  
        <!-- Last Section -->
        <div class="form-section">
          <h2 id="item-title">Last Section</h2>
          <div class="form-group"> 
            <label for="additionalInfo">Q1: Additional Information</label>
            <textarea id="additionalInfo" name="additionalInfo" rows="4"></textarea>
          </div>
        </div>
        <div class="separator"></div>
  
        <div class="form-group">
          <button type="submit">Submit</button>
        </div>
      </form>
  </div> 
  <!-- Your scripts and closing tags here -->
  <script>
    document.addEventListener("DOMContentLoaded", async function () {
      const response = await fetch("data.json");
      const data = await response.json();
      const businessUnitSelect = document.getElementById("businessUnit");
      const serviceIdSelect = document.getElementById("serviceId");
  
      data.businessUnits.forEach(unit => {
        const option = document.createElement("option");
        option.value = unit.value;
        option.textContent = unit.label;
        businessUnitSelect.appendChild(option);
      });
  
      businessUnitSelect.addEventListener("change", function () {
        const selectedValue = businessUnitSelect.value;
        const selectedUnit = data.businessUnits.find(unit => unit.value === selectedValue);
  
        serviceIdSelect.innerHTML = ""; // Clear existing options
  
        if (selectedUnit) {
          selectedUnit.serviceIdSection.forEach(serviceId => {
            const option = document.createElement("option");
            option.value = serviceId;
            option.textContent = serviceId;
            serviceIdSelect.appendChild(option);
          });
        }
      });
  
      // Rest of your script ...
    });
    document.getElementById("myForm").addEventListener("submit", function (event) {
      event.preventDefault(); // Prevent the form from submitting normally

      // Get the form data
      const formData = new FormData(event.target);

      // You can access individual fields like formData.get("name"), formData.get("email"), etc.

      // For demonstration purposes, let's log the form data
      console.log({
        dpia: formData.get("dpia"),
        dataOwner: formData.get("dataOwner"),
        businessUnit: formData.get("businessUnit"),
        serviceId: formData.get("serviceId"),
        groupEmail: formData.get("groupEmail"),
        operatingSystem: formData.get("operatingSystem"),
        vmSpecification: formData.get("vmSpecification"),
        numVms: formData.get("numVms"),
        numDataDisks: formData.get("numDataDisks"),
        dataDiskSize: formData.get("dataDiskSize"),
        serverRole: formData.get("serverRole"),
        environment: formData.get("environment"),
        budgetCode: formData.get("budgetCode"),
        budgetOwner: formData.get("budgetOwner"),
        additionalInfo: formData.get("additionalInfo"),
      });

      fetch("https://prod-129.westeurope.logic.azure.com:443/workflows/e6060831e4494ee9bdf4707684d42880/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=y2kA0WX5OpiAEt6ZCgGszjE94GT9PGkmQiq2MUvlBeE", {
        method: "POST",
        body: JSON.stringify({
            dpia: formData.get("dpia"),
            dataOwner: formData.get("dataOwner"),
            businessUnit: formData.get("businessUnit"),
            serviceId: formData.get("serviceId"),
            groupEmail: formData.get("groupEmail"),
            operatingSystem: formData.get("operatingSystem"),
            vmSpecification: formData.get("vmSpecification"),
            numVms: formData.get("numVms"),
            numDataDisks: formData.get("numDataDisks"),
            dataDiskSize: formData.get("dataDiskSize"),
            serverRole: formData.get("serverRole"),
            environment: formData.get("environment"),
            budgetCode: formData.get("budgetCode"),
            budgetOwner: formData.get("budgetOwner"),
            additionalInfo: formData.get("additionalInfo")
        }),
        headers: {
          "Content-Type": "application/json",
        },
      })
      .then(response => response.json())
      .then(data => {
        // Handle the response from the server if needed
      });
      
      alert("Form submitted successfully!");

      // Optionally, you can reset the form after submission
      event.target.reset();
    });
  </script>
</body>
</html>
